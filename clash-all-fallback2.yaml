# ========================
# Clash-ALL 优化配置2
# ========================

# 机场节点订阅
proxy-providers:
  Pages1:
    url: https://bp.sub.cmliussss.net/sub?host=s1.1989990.xyz&ips=cf.130519.xyz%7Ccf.008500.xyz%7Ccf.090227.xyz%7Ccf.877774.xyz%7Ccf.001315.xyz%7Ccdns.doon.eu.org%7Csub.danfeng.eu.org%7Ccf.zhetengsha.eu.org%7Cmfa.gov.ua%7Csaas.sin.fan%7Cstore.ubi.com%7Cwww.whoer.net%7Cwww.visa.com%7Cwww.visakorea.com%7Cwww.visa.com.sg%7Cwww.visa.com.hk%7Cwww.visa.com.tw%7Cwww.visa.co.jp%7Cshopify.com%7Ctime.is%7Cicook.hk%7Cicook.tw%7Cip.sb%7Cjapan.com%7Cmalaysia.com%7Crussia.com%7Csingapore.com%7Cskk.moe%7Cwww.gco.gov.qa%7Cwww.gov.se%7Cwww.gov.ua%7Cwww.digitalocean.com%7Cwww.shopify.com%7Cwww.whatismyip.com%7Cwww.hugedomains.com%7Cwww.udacity.com%7Cwww.udemy.com%7Cwww.baipiao.eu.org%7Cxn--b6gac.eu.org%7Clog.bpminecraft.com%7Cgur.gov.ua%7Cfbi.gov&proxyip=kr.william.us.ci&uuid=0cb951fc-45fb-491b-823c-e5577ef35495&scv=true
    type: http
    interval: 86400
    health-check:
      enable: true
      url: https://www.gstatic.com/generate_204
      interval: 300
    proxy: 直连
    path: "./proxy_provider/Pages1"
proxies:
- name: 直连
  type: direct
- name: 拒绝
  type: reject
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7895
allow-lan: true
mode: rule
log-level: info
external-controller: 0.0.0.0:9090
external-ui: "/usr/share/openclash/ui"
external-ui-name: metacubexd
secret: GKqBKXcy
dns:
  enable: true
  listen: 0.0.0.0:7874
  ipv6: false
  fake-ip-range: 198.18.0.1/16
  nameserver:
  - 119.6.6.6
  - 223.5.5.5
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
  - "+.lan"
  - "+.local"
  - geosite:cn
  - "+.services.googleapis.cn"
  - "+.xn--ngstr-lra8j.com"
  - "+.ynhtbank.com"
  - "+.qeayr.cn"
  - "+.saojc.xyz"
  - "+.sssyun.xyz"
  - "+.dler.cloud"
  - "+.0tk8a3a1q4t94dler.com"
  - "+.aerianas.top"
  - "+.gptacg.top"
  - "+.wxda.net"
  enhanced-mode: fake-ip
ipv6: true
profile:
  store-selected: true
  store-fake-ip: true
  
proxies-zhilian: &zhilian
  - 直连
  - 所有-手动
  - 所有-自动
  - 所有-故转
  - 拒绝
proxies-shoudong: &shoudong
  - 所有-手动
  - 所有-自动
  - 所有-故转
  - 直连
  - 拒绝
proxies-shoudong: &zidong
  - 所有-自动
  - 所有-手动
  - 所有-故转
  - 直连
  - 拒绝
proxies-guzhuan: &guzhuan
  - 所有-故转
  - 所有-手动
  - 所有-自动
  - 直连
  - 拒绝
proxies-jujue: &jujue
  - 拒绝
  - 所有-故转
  - 所有-手动
  - 所有-自动
  - 直连

proxy-groups:
- name: ChatGPT
  type: select
  proxies: *guzhuan
- name: Claude
  type: select
  proxies: *guzhuan
- name: Meta AI
  type: select
  proxies: *guzhuan
- name: Perplexity
  type: select
  proxies: *guzhuan
- name: GitHub
  type: select
  proxies: *guzhuan
- name: Telegram
  type: select
  proxies: *guzhuan
- name: Twitter(X)
  type: select
  proxies: *guzhuan
- name: WhatsApp
  type: select
  proxies: *guzhuan
- name: Facebook
  type: select
  proxies: *guzhuan
- name: Steam
  type: select
  proxies: *guzhuan
- name: Game
  type: select
  proxies: *guzhuan
- name: YouTube
  type: select
  proxies: *guzhuan
- name: TikTok
  type: select
  proxies: *guzhuan
- name: Disney
  type: select
  proxies: *guzhuan
- name: Netflix
  type: select
  proxies: *guzhuan
- name: HBO
  type: select
  proxies: *guzhuan
- name: Spotify
  type: select
  proxies: *guzhuan
- name: Crypto
  type: select
  proxies: *guzhuan
- name: Amazon
  type: select
  proxies: *guzhuan
- name: Apple
  type: select
  proxies: *guzhuan
- name: Microsoft
  type: select
  proxies: *guzhuan
- name: Google
  type: select
  proxies: *guzhuan
- name: Block
  type: select
  proxies: *jujue
- name: 国外
  type: select
  proxies: *guzhuan
- name: 国内
  type: select
  proxies: *zhilian
- name: 其他
  type: select
  proxies: *guzhuan
- name: 所有-手动
  type: select
  include-all: true
  filter: "^((?!(直连|拒绝)).)*$"
- name: 所有-自动
  type: url-test
  include-all: true
  tolerance: 50
  interval: 300
  filter: "^((?!(直连|拒绝)).)*$"
- name: 所有-故转
  type: fallback
  interval: 300
  lazy: false
  proxies:
  - 所有-手动
  - 所有-自动
rules:
- RULE-SET,MY-DIRECT / Domain,国内
- RULE-SET,Block / Domain,Block
- RULE-SET,ChatGPT / Domain,ChatGPT
- RULE-SET,Claude / Domain,Claude
- RULE-SET,Meta AI / Domain,Meta AI
- RULE-SET,Perplexity / Domain,Perplexity
- RULE-SET,GitHub / Domain,GitHub
- RULE-SET,Telegram / Domain,Telegram
- RULE-SET,Telegram / IP,Telegram,no-resolve
- RULE-SET,Twitter / Domain,Twitter(X)
- RULE-SET,WhatsApp / Domain,WhatsApp
- RULE-SET,Facebook / Domain,Facebook
- RULE-SET,Amazon / Domain,Amazon
- RULE-SET,Apple / Domain,Apple
- RULE-SET,Apple-CN / Domain,Apple
- RULE-SET,Microsoft / Domain,Microsoft
- RULE-SET,OKX / Domain,Crypto
- RULE-SET,Bybit / Domain,Crypto
- RULE-SET,Binance / Domain,Crypto
- RULE-SET,Youtube / Domain,YouTube
- RULE-SET,TikTok / Domain,TikTok
- RULE-SET,Netflix / Domain,Netflix
- RULE-SET,Netflix / IP,Netflix,no-resolve
- RULE-SET,Disney / Domain,Disney
- RULE-SET,HBO / Domain,HBO
- RULE-SET,Spotify / Domain,Spotify
- RULE-SET,Steam / Domain,Steam
- RULE-SET,Epic / Domain,Game
- RULE-SET,EA / Domain,Game
- RULE-SET,Blizzard / Domain,Game
- RULE-SET,UBI / Domain,Game
- RULE-SET,PlayStation / Domain,Game
- RULE-SET,Nintend / Domain,Game
- RULE-SET,Google / Domain,Google
- RULE-SET,Google / IP,Google,no-resolve
- RULE-SET,Proxy / Domain,国外
- RULE-SET,Globe / Domain,国外
- RULE-SET,Direct / Domain,国内
- RULE-SET,China / Domain,国内
- RULE-SET,China / IP,国内,no-resolve
- RULE-SET,Private / Domain,国内
- MATCH,其他
rule-anchor:
  ip:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
  domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
  class:
    type: http
    interval: 86400
    behavior: classical
    format: text
rule-providers:
  MY-DIRECT / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/yourvid/clash/refs/heads/main/Direct.list
    path: "./rule_provider/MY-DIRECT / Domain"
  ChatGPT / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/openai.mrs
    path: "./rule_provider/ChatGPT / Domain"
  Claude / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list
    path: "./rule_provider/Claude / Domain"
  Meta AI / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/MetaAi.list
    path: "./rule_provider/Meta AI / Domain"
  Perplexity / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/perplexity.mrs
    path: "./rule_provider/Perplexity / Domain"
  Copilot / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Copilot.list
    path: "./rule_provider/Copilot / Domain"
  Gemini / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Gemini.list
    path: "./rule_provider/Gemini / Domain"
  GitHub / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/github.mrs
    path: "./rule_provider/GitHub / Domain"
  Telegram / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/telegram.mrs
    path: "./rule_provider/Telegram / Domain"
  Telegram / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/telegram.mrs
    path: "./rule_provider/Telegram / IP"
  Twitter / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/x.mrs
    path: "./rule_provider/Twitter / Domain"
  WhatsApp / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Whatsapp/Whatsapp.list
    path: "./rule_provider/WhatsApp / Domain"
  Facebook / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/facebook.mrs
    path: "./rule_provider/Facebook / Domain"
  Amazon / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/amazon.mrs
    path: "./rule_provider/Amazon / Domain"
  Apple-CN / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple-cn.mrs
    path: "./rule_provider/Apple-CN / Domain"
  Apple / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/apple.mrs
    path: "./rule_provider/Apple / Domain"
  Microsoft / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/microsoft.mrs
    path: "./rule_provider/Microsoft / Domain"
  OKX / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/okx.mrs
    path: "./rule_provider/OKX / Domain"
  Bybit / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/bybit.mrs
    path: "./rule_provider/Bybit / Domain"
  Binance / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/binance.mrs
    path: "./rule_provider/Binance / Domain"
  TikTok / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/tiktok.mrs
    path: "./rule_provider/TikTok / Domain"
  Netflix / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/netflix.mrs
    path: "./rule_provider/Netflix / Domain"
  Netflix / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/netflix.mrs
    path: "./rule_provider/Netflix / IP"
  Disney / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/disney.mrs
    path: "./rule_provider/Disney / Domain"
  HBO / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/hbo.mrs
    path: "./rule_provider/HBO / Domain"
  Spotify / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/spotify.mrs
    path: "./rule_provider/Spotify / Domain"
  Steam / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/steam.mrs
    path: "./rule_provider/Steam / Domain"
  Epic / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list
    path: "./rule_provider/Epic / Domain"
  EA / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/EA/EA.list
    path: "./rule_provider/EA / Domain"
  Blizzard / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list
    path: "./rule_provider/Blizzard / Domain"
  UBI / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list
    path: "./rule_provider/UBI / Domain"
  PlayStation / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/PlayStation/PlayStation.list
    path: "./rule_provider/PlayStation / Domain"
  Nintend / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list
    path: "./rule_provider/Nintend / Domain"
  Proxy / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list
    path: "./rule_provider/Proxy / Domain"
  Globe / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list
    path: "./rule_provider/Globe / Domain"
  Direct / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Direct.list
    path: "./rule_provider/Direct / Domain"
  China / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/cn.mrs
    path: "./rule_provider/China / Domain"
  China / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/cn.mrs
    path: "./rule_provider/China / IP"
  Private / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/private.mrs
    path: "./rule_provider/Private / Domain"
  Block / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Block.list
    path: "./rule_provider/Block / Domain"
  Nvidia / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Nvidia/Nvidia.list
    path: "./rule_provider/Nvidia / Domain"
  Crunchyroll / Domain:
    type: http
    interval: 86400
    behavior: classical
    format: text
    url: https://gh-proxy.com/raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Crunchyroll.list
    path: "./rule_provider/Crunchyroll / Domain"
  Reddit / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/reddit.mrs
    path: "./rule_provider/Reddit / Domain"
  Youtube / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/youtube.mrs
    path: "./rule_provider/Youtube / Domain"
  Google / Domain:
    type: http
    interval: 86400
    behavior: domain
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geosite/google.mrs
    path: "./rule_provider/Google / Domain"
  Google / IP:
    type: http
    interval: 86400
    behavior: ipcidr
    format: mrs
    url: https://gh-proxy.com/github.com/metacubex/meta-rules-dat/raw/refs/heads/meta/geo/geoip/google.mrs
    path: "./rule_provider/Google / IP"
bind-address: "*"
keep-alive-interval: 15
keep-alive-idle: 600
interface-name: pppoe-wan
external-controller-cors:
  allow-origins:
  - op.669779.xyz
  allow-private-network: true
geox-url: {}
sniffer:
  enable: true
  override-destination: true
  sniff:
    QUIC:
      ports:
      - 443
    TLS:
      ports:
      - 443
      - 8443
    HTTP:
      ports:
      - 80
      - 8080-8880
      override-destination: true
  force-domain:
  - "+.netflix.com"
  - "+.nflxvideo.net"
  - "+.amazonaws.com"
  - "+.media.dssott.com"
  skip-domain:
  - "+.apple.com"
  - Mijia Cloud
  - dlg.io.mi.com
  - "+.oray.com"
  - "+.sunlogin.net"
  - "+.push.apple.com"
  parse-pure-ip: true
authentication:
- Clash:123456
